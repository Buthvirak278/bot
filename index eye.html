<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>Cam Happy Mart</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet"/>
    <style>
        .hidden {
            display: none;
        }
        /* Ensure modals are scrollable */
        .scrollable-modal {
            max-height: 400px;
            overflow-y: auto;
        }
        .remove-btn {
            cursor: pointer;
            color: red;
            font-size: 14px;
        }
    </style>
</head>
<body class="bg-gray-100 font-roboto">
    <header class="bg-white shadow p-4 flex items-center justify-between relative">
        <div class="flex items-center">
            <img alt="Cam Happy Mart logo" class="h-10" src="https://storage.googleapis.com/a1aa/image/nfCQRGTs77myrEnNCN2JSNceKV9finboVv2IgAZmzbg.jpg" />
        </div>
        <div class="flex-grow mx-4">
            <input class="w-full p-2 border rounded" id="searchInput" oninput="filterItems()" placeholder="Search for items..." type="text"/>
        </div>
        <div class="flex items-center space-x-4">
            <button class="text-green-600">
                <i class="fas fa-search"></i>
            </button>
            <button class="text-green-600">
                <i class="fas fa-bars"></i>
            </button>
            <div class="relative">
                <button class="relative text-green-600" onclick="toggleWishlist()">
                    <i class="fas fa-heart"></i>
                    <span class="absolute top-0 right-0 bg-red-600 text-white text-xs rounded-full px-1 hidden" id="wishlistCount">0</span>
                </button>
                <div class="absolute right-0 mt-2 w-80 bg-white border rounded shadow-lg hidden scrollable-modal" id="wishlistModal">
                    <div class="p-4">
                        <h2 class="text-xl font-bold mb-4">Wishlist</h2>
                        <div class="space-y-4" id="wishlistItems"></div>
                    </div>
                </div>
            </div>
            <button class="text-green-600">
                <i class="fas fa-user"></i>
            </button>
            <div class="relative">
                <button class="relative text-green-600" onclick="toggleCart()">
                    <i class="fas fa-shopping-cart"></i>
                    <span class="absolute top-0 right-0 bg-red-600 text-white text-xs rounded-full px-1 hidden" id="cartCount">0</span>
                </button>
                <div class="absolute right-0 mt-2 w-80 bg-white border rounded shadow-lg hidden scrollable-modal" id="cartModal">
                    <div class="p-4">
                        <h2 class="text-xl font-bold mb-4">Shopping Cart</h2>
                        <div class="space-y-4" id="cartItems"></div>
                    </div>
                </div>
            </div>
            <div class="text-gray-700">
                My cart <span class="font-bold">$0.00</span>
            </div>
        </div>
    </header>

    <!-- Product Modal -->
    <html lang="en">
  <head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>Grocery Category Products</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet"/>
  </head>
  <body class="bg-gray-100">
    <div class="container mx-auto p-4">
      <div class="flex justify-between items-center mb-4">
        <h1 class="text-2xl font-bold">
          Category Products (ប្រភេទទំនិញ សាច់)
        </h1>
        <div class="flex items-center">
          <span class="mr-2">Sort by</span>
          <select class="border border-gray-300 rounded p-2">
            <option>Latest</option>
            <option>Price: Low to High</option>
            <option>Price: High to Low</option>
          </select>
        </div>
      </div>
      <p class="mb-4">134 Items found</p>
      <div class="flex flex-col lg:flex-row">
        <div class="w-full lg:w-1/4 p-4 bg-white rounded shadow mb-4 lg:mb-0">
          <h2 class="text-lg font-bold mb-4">Filter</h2>
          <div class="mb-4">
            <label class="block mb-2">Choose</label>
            <select class="w-full border border-gray-300 rounded p-2">
              <option>Option 1</option>
              <option>Option 2</option>
            </select>
          </div>
       
          <div>
            <h3 class="font-bold mb-2">Categories</h3>
            <ul>
              <li class="mb-2"><a class="flex justify-between items-center" href="index 1គ្រឿងទេស.html"><span>គ្រឿងទេស</span><i class="fas fa-chevron-right"></i></a></li>
              <li class="mb-2"><a class="flex justify-between items-center" href="index ថង់ខ្មៅ.html"><span>ថង់</span><i class="fas fa-chevron-right"></i></a></li>
              <li class="mb-2"><a class="flex justify-between items-center" href="index អង្ករ ធម្មជាតិ.html"><span>អង្ករ</span><i class="fas fa-chevron-right"></i></a></li>
              <li class="mb-2"><a class="flex justify-between items-center" href="index សាប៊ូ កក់សក់.html"><span>សាប៊ូ</span><i class="fas fa-chevron-right"></i></a></li>
              <li class="mb-2"><a class="flex justify-between items-center" href="index បន្លែ.html"><span>បន្លែ</span><i class="fas fa-chevron-right"></i></a></li>
              <li class="mb-2"><a class="flex justify-between items-center" href="index​ ត្រី.html"><span>ត្រី</span><i class="fas fa-chevron-right"></i></a></li>
              <li class="mb-2"><a class="flex justify-between items-center" href="index សាច់គោ.html"><span>សាច់</span><i class="fas fa-chevron-right"></i></a></li>
              <li class="mb-2"><a class="flex justify-between items-center" href="index ក្រដាស.html"><span>ក្រដាស</span><i class="fas fa-chevron-right"></i></a></li>
            </ul>
          </div>
        </div>
        <div class="w-full lg:w-3/4 p-4">
            <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
              <!-- Product 1 -->
              <div class="bg-white p-4 rounded shadow" onclick="openProductModal('សាច់គោភ្លៅ 1kg', 9.50, 'https://camhappymart.com/storage/app/public/product/1608176097e7XNF4nx.jpg')">
                <div class="relative">
                  <img alt="សាច់គោភ្លៅ 1kg" class="w-full h-48 object-cover rounded" height="150" src="https://camhappymart.com/storage/app/public/product/1608176097e7XNF4nx.jpg" width="150"/>
                  <div class="absolute inset-0 flex items-center justify-center bg-black bg-opacity-50 opacity-0 hover:opacity-100 transition-opacity">
                    <i class="fas fa-eye text-white text-2xl cursor-pointer"></i>
                  </div>
                </div>
                <p class="mt-2 text-center">សាច់គោភ្លៅ 1kg</p>
                <p class="text-center text-blue-500">$9.50</p>
              </div>
        
              <!-- Product 2 -->
              <div class="bg-white p-4 rounded shadow" onclick="openProductModal('សាច់គោអមច្រឡក 1kg', 7.90, 'https://camhappymart.com/storage/app/public/product/2023-01-13-63c0d7ce509bb.png')">
                <div class="relative">
                  <img alt="សាច់គោអមច្រឡក 1kg" class="w-full h-48 object-cover rounded" height="150" src="https://camhappymart.com/storage/app/public/product/2023-01-13-63c0d7ce509bb.png" width="150"/>
                  <div class="absolute inset-0 flex items-center justify-center bg-black bg-opacity-50 opacity-0 hover:opacity-100 transition-opacity">
                    <i class="fas fa-eye text-white text-2xl cursor-pointer"></i>
                  </div>
                </div>
                <p class="mt-2 text-center">សាច់គោអមច្រឡក 1kg</p>
                <p class="text-center text-blue-500">$7.90</p>
              </div>
        
              <!-- Product 3 -->
              <div class="bg-white p-4 rounded shadow" onclick="openProductModal('សាច់គោកិន 1kg', 9.00, 'https://camhappymart.com/storage/app/public/product/1617104643ClJrf2jF.jpg')">
                <div class="relative">
                  <img alt="សាច់គោកិន 1kg" class="w-full h-48 object-cover rounded" height="150" src="https://camhappymart.com/storage/app/public/product/1617104643ClJrf2jF.jpg" width="150"/>
                  <div class="absolute inset-0 flex items-center justify-center bg-black bg-opacity-50 opacity-0 hover:opacity-100 transition-opacity">
                    <i class="fas fa-eye text-white text-2xl cursor-pointer"></i>
                  </div>
                </div>
                <p class="mt-2 text-center">សាច់គោកិន 1kg</p>
                <p class="text-center text-blue-500">$9.00</p>
              </div>
        
              <!-- Product 4 -->
              <div class="bg-white p-4 rounded shadow" onclick="openProductModal('សាច់ច្រឡកក្រៅ 1kg', 9.30, 'https://camhappymart.com/storage/app/public/product/2023-01-13-63c0d7ce509bb.png')">
                <div class="relative">
                  <img alt="សាច់ច្រឡកក្រៅ 1kg" class="w-full h-48 object-cover rounded" height="150" src="https://camhappymart.com/storage/app/public/product/2023-01-13-63c0d7ce509bb.png" width="150"/>
                  <div class="absolute inset-0 flex items-center justify-center bg-black bg-opacity-50 opacity-0 hover:opacity-100 transition-opacity">
                    <i class="fas fa-eye text-white text-2xl cursor-pointer"></i>
                  </div>
                </div>
                <p class="mt-2 text-center">សាច់ច្រឡកក្រៅ 1kg</p>
                <p class="text-center text-blue-500">$9.30</p>
              </div>
        
              <!-- Product 5 -->
              

      <!-- Product Modal -->
      <div id="productModal" class="fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center hidden">
        <div class="bg-white p-4 rounded shadow-lg relative max-w-4xl w-full">
          <button onclick="closeProductModal()" class="absolute top-2 right-2 text-gray-500">
            <i class="fas fa-times"></i>
          </button>
          <div class="flex flex-col md:flex-row">
            <!-- Product Image -->
            <div class="flex-shrink-0 mb-4 md:mb-0 md:mr-4">
              <img id="productImage" alt="Product Image" class="w-full md:w-64" height="600" src="" width="300"/>
            </div>
            <div class="flex-grow">
              <h2 id="productName" class="text-xl font-bold mb-2">Product Name</h2>
              <div class="flex items-center mb-2">
                <div class="flex text-yellow-500">
                  <i class="far fa-star"></i>
                  <i class="far fa-star"></i>
                  <i class="far fa-star"></i>
                  <i class="far fa-star"></i>
                  <i class="far fa-star"></i>
                </div>
                <span class="ml-2 text-gray-500">(0 Reviews)</span>
                <span class="mx-2 text-gray-500">|</span>
                <span class="text-gray-500">0 Orders</span>
                <span class="mx-2 text-gray-500">|</span>
                <span class="text-gray-500">0 Wish Listed</span>
              </div>
              <div id="productPrice" class="text-2xl text-green-500 font-bold mb-4">$0.00</div>
              <div class="flex items-center mb-4">
                <span class="mr-2">Quantity :</span>
                <div class="flex items-center border rounded">
                  <button onclick="decreaseQuantity()" class="px-2 py-1 text-gray-700">-</button>
                  <input id="quantity" class="w-12 text-center border-l border-r" type="number" value="1" min="1" max="99" />
                  <button onclick="increaseQuantity()" class="px-2 py-1 text-gray-700">+</button>
                </div>
              </div>
              <div class="text-lg mb-4">
                Total Price : <span class="text-green-500 font-bold" id="totalPrice">$0.00</span> <span class="text-gray-500">(Tax : incl.)</span>
              </div>
              <div class="flex items-center space-x-2">
                <button onclick="buyNow()" class="px-4 py-2 bg-black text-white rounded">Buy now</button>
                <button onclick="addToCart()" class="px-4 py-2 bg-green-500 text-white rounded">Add to cart</button>
                <button onclick="addToHeart()" id="heartButton" class="px-4 py-2 border border-green-500 text-green-500 rounded flex items-center">
                  <i class="far fa-heart mr-2"></i> <span id="heartCount">0</span>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>

    </div>
    <div class="flex justify-center mt-6">
        <nav aria-label="Page navigation example">
          <ul class="inline-flex -space-x-px">
          
            <li>
              <a href="index សាច់គោ.html" class="px-3 py-2 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700">1</a>
            </li>
            <li>
              <a href="index សាច់ជ្រូក.html" class="px-3 py-2 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700">2</a>
            </li>
            
           
      </div>

    <script>
      // Open Product Modal with details
      function openProductModal(productName, productPrice, productImage) {
        document.getElementById('productModal').classList.remove('hidden');
        document.getElementById('productName').textContent = productName;
        document.getElementById('productPrice').textContent = "$" + productPrice.toFixed(2);
        document.getElementById('productImage').src = productImage;
        updateTotalPrice(productPrice);
      }

      // Close Product Modal
      function closeProductModal() {
        document.getElementById('productModal').classList.add('hidden');
      }

      // Update Total Price based on quantity and selected product
      function updateTotalPrice(price) {
        let quantity = document.getElementById('quantity').value;
        let totalPrice = (quantity * price).toFixed(2);
        document.getElementById('totalPrice').textContent = "$" + totalPrice;
      }

      // Increase Quantity
      function increaseQuantity() {
        let quantityInput = document.getElementById('quantity');
        let quantity = parseInt(quantityInput.value);
        if (quantity < 99) {
          quantityInput.value = quantity + 1;
          updateTotalPrice(parseFloat(document.getElementById('productPrice').textContent.replace('$', '')));
        }
      }

      // Decrease Quantity
      function decreaseQuantity() {
        let quantityInput = document.getElementById('quantity');
        let quantity = parseInt(quantityInput.value);
        if (quantity > 1) {
          quantityInput.value = quantity - 1;
          updateTotalPrice(parseFloat(document.getElementById('productPrice').textContent.replace('$', '')));
        }
      }

      // Buy Now
      function buyNow() {
        alert("Proceeding to checkout...");
      }

      // Add to Cart
      function addToCart() {
        alert("Added to Cart");
      }

      // Add to Heart (Wishlist)
      function addToHeart() {
        let heartCount = document.getElementById("heartCount");
        let count = parseInt(heartCount.textContent) + 1;
        heartCount.textContent = count;
        alert("Added to Wishlist");
      }
    </script>
    <script>
        // Add to Cart
        function addToCart() {
            const productName = document.getElementById('productName').textContent;
            const productPrice = document.getElementById('productPrice').textContent;
            const productImage = document.getElementById('productImage').src;

            // Save to localStorage
            const cartItems = JSON.parse(localStorage.getItem('cartItems')) || [];
            cartItems.push({ name: productName, price: productPrice, image: productImage });
            localStorage.setItem('cartItems', JSON.stringify(cartItems));

            // Update Cart Modal
            updateCartModal();

            alert("Added to Cart");
        }

        // Add to Heart (Wishlist)
        function addToHeart() {
            const productName = document.getElementById('productName').textContent;
            const productPrice = document.getElementById('productPrice').textContent;
            const productImage = document.getElementById('productImage').src;

            // Save to localStorage
            const wishlistItems = JSON.parse(localStorage.getItem('wishlistItems')) || [];
            wishlistItems.push({ name: productName, price: productPrice, image: productImage });
            localStorage.setItem('wishlistItems', JSON.stringify(wishlistItems));

            // Update Wishlist Modal
            updateWishlistModal();

            alert("Added to Wishlist");
        }

        // Toggle Wishlist Modal
        function toggleWishlist() {
            const wishlistModal = document.getElementById('wishlistModal');
            wishlistModal.classList.toggle('hidden');
            updateWishlistModal(); // Update the wishlist items when toggling the modal
        }

        // Toggle Cart Modal
        function toggleCart() {
            const cartModal = document.getElementById('cartModal');
            cartModal.classList.toggle('hidden');
            updateCartModal(); // Update the cart items when toggling the modal
        }

       // Update Wishlist Modal
// Update Wishlist Modal
function updateWishlistModal() {
    const wishlistItemsContainer = document.getElementById('wishlistItems');
    const wishlistItems = JSON.parse(localStorage.getItem('wishlistItems')) || [];
    wishlistItemsContainer.innerHTML = ''; // Clear current wishlist items

    wishlistItems.forEach((item, index) => {
        const itemElement = document.createElement('div');
        itemElement.classList.add('flex', 'items-center', 'justify-between', 'mb-4'); // Adjust the layout here

        itemElement.innerHTML = `
            <div class="flex space-x-4">
                <img src="${item.image}" alt="${item.name}" class="w-16 h-16 object-cover rounded">
                <div>
                    <h3 class="text-sm font-semibold">${item.name}</h3>
                    <p class="text-xs text-gray-500">${item.price}</p>
                </div>
            </div>
            <button class="remove-btn" onclick="removeItemFromWishlist(${index})">Remove</button>
        `;
        wishlistItemsContainer.appendChild(itemElement);
    });

    // Update Wishlist count
    document.getElementById('wishlistCount').textContent = wishlistItems.length;
    document.getElementById('wishlistCount').classList.toggle('hidden', wishlistItems.length === 0);
}

// Update Cart Modal
function updateCartModal() {
    const cartItemsContainer = document.getElementById('cartItems');
    const cartItems = JSON.parse(localStorage.getItem('cartItems')) || [];
    cartItemsContainer.innerHTML = ''; // Clear current cart items

    cartItems.forEach((item, index) => {
        const itemElement = document.createElement('div');
        itemElement.classList.add('flex', 'items-center', 'justify-between', 'mb-4'); // Adjust the layout here

        itemElement.innerHTML = `
            <div class="flex space-x-4">
                <img src="${item.image}" alt="${item.name}" class="w-16 h-16 object-cover rounded">
                <div>
                    <h3 class="text-sm font-semibold">${item.name}</h3>
                    <p class="text-xs text-gray-500">${item.price}</p>
                </div>
            </div>
            <button class="remove-btn" onclick="removeItemFromCart(${index})">Remove</button>
        `;
        cartItemsContainer.appendChild(itemElement);
    });

    // Update Cart count
    document.getElementById('cartCount').textContent = cartItems.length;
    document.getElementById('cartCount').classList.toggle('hidden', cartItems.length === 0);
}


// Update Cart Modal
function updateCartModal() {
    const cartItemsContainer = document.getElementById('cartItems');
    const cartItems = JSON.parse(localStorage.getItem('cartItems')) || [];
    cartItemsContainer.innerHTML = ''; // Clear current cart items

    cartItems.forEach((item, index) => {
        const itemElement = document.createElement('div');
        itemElement.classList.add('flex', 'space-x-4', 'mb-4');

        itemElement.innerHTML = `
            <button class="remove-btn" onclick="removeItemFromCart(${index})">Remove</button>
            <img src="${item.image}" alt="${item.name}" class="w-16 h-16 object-cover rounded">
            <div>
                <h3 class="text-sm font-semibold">${item.name}</h3>
                <p class="text-xs text-gray-500">${item.price}</p>
            </div>
        `;
        cartItemsContainer.appendChild(itemElement);
    });

    // Update Cart count
    document.getElementById('cartCount').textContent = cartItems.length;
    document.getElementById('cartCount').classList.toggle('hidden', cartItems.length === 0);
}


        // Update Cart Modal
        function updateCartModal() {
            const cartItemsContainer = document.getElementById('cartItems');
            const cartItems = JSON.parse(localStorage.getItem('cartItems')) || [];
            cartItemsContainer.innerHTML = ''; // Clear current cart items

            cartItems.forEach((item, index) => {
                const itemElement = document.createElement('div');
                itemElement.classList.add('flex', 'space-x-4', 'mb-4');

                itemElement.innerHTML = `
                    <img src="${item.image}" alt="${item.name}" class="w-16 h-16 object-cover rounded">
                    <div>
                        <h3 class="text-sm font-semibold">${item.name}</h3>
                        <p class="text-xs text-gray-500">${item.price}</p>
                    </div>
                    <button class="remove-btn" onclick="removeItemFromCart(${index})">Remove</button>
                `;
                cartItemsContainer.appendChild(itemElement);
            });

            // Update Cart count
            document.getElementById('cartCount').textContent = cartItems.length;
            document.getElementById('cartCount').classList.toggle('hidden', cartItems.length === 0);
        }

        // Remove Item from Cart
        function removeItemFromCart(index) {
            const cartItems = JSON.parse(localStorage.getItem('cartItems')) || [];
            cartItems.splice(index, 1); // Remove the item at the specified index
            localStorage.setItem('cartItems', JSON.stringify(cartItems));

            updateCartModal(); // Update the cart modal
        }

        // Remove Item from Wishlist
        function removeItemFromWishlist(index) {
            const wishlistItems = JSON.parse(localStorage.getItem('wishlistItems')) || [];
            wishlistItems.splice(index, 1); // Remove the item at the specified index
            localStorage.setItem('wishlistItems', JSON.stringify(wishlistItems));

            updateWishlistModal(); // Update the wishlist modal
        }

        // Open Product Modal with details
        function openProductModal(productName, productPrice, productImage) {
            document.getElementById('productModal').classList.remove('hidden');
            document.getElementById('productName').textContent = productName;
            document.getElementById('productPrice').textContent = "$" + productPrice.toFixed(2);
            document.getElementById('productImage').src = productImage;
            updateTotalPrice(productPrice);
        }

        // Close Product Modal
        function closeProductModal() {
            document.getElementById('productModal').classList.add('hidden');
        }

        // Handle Quantity Change and Update Total Price
        function increaseQuantity() {
            const quantityInput = document.getElementById('quantity');
            quantityInput.value = parseInt(quantityInput.value) + 1;
            updateTotalPrice();
        }

        function decreaseQuantity() {
            const quantityInput = document.getElementById('quantity');
            if (parseInt(quantityInput.value) > 1) {
                quantityInput.value = parseInt(quantityInput.value) - 1;
            }
            updateTotalPrice();
        }

        // Update Total Price
        function updateTotalPrice() {
            const quantity = parseInt(document.getElementById('quantity').value);
            const price = parseFloat(document.getElementById('productPrice').textContent.replace('$', ''));
            const totalPrice = price * quantity;
            document.getElementById('totalPrice').textContent = "$" + totalPrice.toFixed(2);
        }
    </script>
  </body>
</html>
